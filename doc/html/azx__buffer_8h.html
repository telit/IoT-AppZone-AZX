<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AZ Extension Libraries: stage/azx/core/hdr/azx_buffer.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="telit_style.css" rel="stylesheet" type="text/css"/>
<link href="telit_navtree.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 100px;">
  <td id="projectlogo"><img alt="Logo" src="telit-logo.png"/></td>
  <td id="projectalign" style="padding-left: 2em;">
   <div id="projectname">AZ Extension Libraries
   &#160;<span id="projectnumber">1.5.55.f372318</span>
   </div>
   <div id="projectbrief">A set of companion libraries that make AZ development easier</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('azx__buffer_8h.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">azx_buffer.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Buffers data that can be retrieved later.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;m2mb_types.h&quot;</code><br />
<code>#include &quot;<a class="el" href="azx__log_8h_source.html">azx_log.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for azx_buffer.h:</div>
<div class="dyncontent">
<div class="center"><img src="azx__buffer_8h__incl.png" border="0" usemap="#stage_2azx_2core_2hdr_2azx__buffer_8h" alt=""/></div>
<map name="stage_2azx_2core_2hdr_2azx__buffer_8h" id="stage_2azx_2core_2hdr_2azx__buffer_8h">
<area shape="rect" title="Buffers data that can be retrieved later." alt="" coords="5,5,136,47"/>
<area shape="rect" title=" " alt="" coords="17,169,125,196"/>
<area shape="rect" href="azx__log_8h.html" title="Logging utilities to print on available output channels." alt="" coords="70,95,149,121"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="azx__buffer_8h__dep__incl.png" border="0" usemap="#stage_2azx_2core_2hdr_2azx__buffer_8hdep" alt=""/></div>
<map name="stage_2azx_2core_2hdr_2azx__buffer_8hdep" id="stage_2azx_2core_2hdr_2azx__buffer_8hdep">
<area shape="rect" title="Buffers data that can be retrieved later." alt="" coords="83,5,213,47"/>
<area shape="rect" href="azx__ati_8h.html" title="Sending AT commands and handling URCs." alt="" coords="83,95,213,136"/>
<area shape="rect" href="azx__adc_8h.html" title="Read from and write to a peripheral via ADC." alt="" coords="5,184,136,225"/>
<area shape="rect" href="azx__apn_8h.html" title="Automatically setting APN based on the ICCID of the SIM." alt="" coords="160,184,291,225"/>
<area shape="rect" href="azx__connectivity_8h.html" title="Establish network and data connection synchronously and provide info." alt="" coords="158,273,293,315"/>
</map>
</div>
</div>
<p><a href="azx__buffer_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Convenience wrappers for copying and reading objects from the buffer</div></td></tr>
<tr class="memitem:a57cbd24695964549d470cfdc7339ff96"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="azx__buffer_8h.html#a57cbd24695964549d470cfdc7339ff96">AZX_BUFFER_GET</a>(type,  idx)&#160;&#160;&#160;(const type*)<a class="el" href="azx__buffer_8h.html#aba4fac627137058a3894f9115726ba50">azx_buffer_getObj</a>(idx)</td></tr>
<tr class="separator:a57cbd24695964549d470cfdc7339ff96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb5d6450601012f6988144d51b9af494"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="azx__buffer_8h.html#afb5d6450601012f6988144d51b9af494">AZX_BUFFER_ADD</a>(type,  obj)&#160;&#160;&#160;<a class="el" href="azx__buffer_8h.html#ad190321a9d24ad0157f2e4c19f0b2875">azx_buffer_addObj</a>(obj, sizeof(type))</td></tr>
<tr class="separator:afb5d6450601012f6988144d51b9af494"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae33ae291e3e2e3766b93ced1573c34b9"><td class="memItemLeft" align="right" valign="top">INT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="azx__buffer_8h.html#ae33ae291e3e2e3766b93ced1573c34b9">azx_buffer_add</a> (const CHAR *msg, INT32 len)</td></tr>
<tr class="memdesc:ae33ae291e3e2e3766b93ced1573c34b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores a string in the buffer to be retrieved asynchronously.  <a href="azx__buffer_8h.html#ae33ae291e3e2e3766b93ced1573c34b9">More...</a><br /></td></tr>
<tr class="separator:ae33ae291e3e2e3766b93ced1573c34b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3c95ccdd99f40c9a80fb184ea4f5a65"><td class="memItemLeft" align="right" valign="top">const CHAR *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="azx__buffer_8h.html#ab3c95ccdd99f40c9a80fb184ea4f5a65">azx_buffer_get</a> (INT32 index)</td></tr>
<tr class="memdesc:ab3c95ccdd99f40c9a80fb184ea4f5a65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the string that has been stored.  <a href="azx__buffer_8h.html#ab3c95ccdd99f40c9a80fb184ea4f5a65">More...</a><br /></td></tr>
<tr class="separator:ab3c95ccdd99f40c9a80fb184ea4f5a65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad190321a9d24ad0157f2e4c19f0b2875"><td class="memItemLeft" align="right" valign="top">INT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="azx__buffer_8h.html#ad190321a9d24ad0157f2e4c19f0b2875">azx_buffer_addObj</a> (const void *obj, INT32 len)</td></tr>
<tr class="memdesc:ad190321a9d24ad0157f2e4c19f0b2875"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores a data structure in the buffer to be retrieved asynchronously.  <a href="azx__buffer_8h.html#ad190321a9d24ad0157f2e4c19f0b2875">More...</a><br /></td></tr>
<tr class="separator:ad190321a9d24ad0157f2e4c19f0b2875"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba4fac627137058a3894f9115726ba50"><td class="memItemLeft" align="right" valign="top">const void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="azx__buffer_8h.html#aba4fac627137058a3894f9115726ba50">azx_buffer_getObj</a> (INT32 index)</td></tr>
<tr class="memdesc:aba4fac627137058a3894f9115726ba50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads some data that has been stored.  <a href="azx__buffer_8h.html#aba4fac627137058a3894f9115726ba50">More...</a><br /></td></tr>
<tr class="separator:aba4fac627137058a3894f9115726ba50"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Buffers data that can be retrieved later. </p>
<dl class="section version"><dt>Version</dt><dd>1.0.1 </dd></dl>
<dl class="section user"><dt>Dependencies</dt><dd>core/azx_log </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Sorin Basca </dd></dl>
<dl class="section date"><dt>Date</dt><dd>10/02/2017</dd></dl>
<p>This is a utility library that makes it easy to buffer some data to be passed to another task. Most of the time, if something needs to be handled in another task, there is no convenient way to pass the data (mostly strings). These functions help with that.</p>
<p>So typically if you have to pass a string to another class, you can do something like: </p><pre class="fragment">INT32 data_idx = azx_buffer_add(new_msg, -1);
azx_tasks_sendMessageToTask(task_id, PARSE_RESPONSE, data_idx, 0);
</pre><p>then, in the task you have: </p><pre class="fragment">static INT32 my_task(INT32 type, INT32 param1, INT32 param2)
{
  switch(type)
  {
  ...
    case PARSE_RESPONSE:
    {
      const CHAR* response = azx_buffer_get(param1);
      parse(response);
    }
    ...
  }
}
</pre><p>There is no need to clear the data once consumed, but there is a risk of the data not being reliable. If for example too much data is passed like this too quickly while it's not being processed fast enough, it may be the case that new data will overwrite the old one.</p>
<p>Therefore it is important that the design of the flow is done to allow for lower insert rates than consume rates. Other times the errors can be avoided by increasing the inner buffer. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="afb5d6450601012f6988144d51b9af494"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb5d6450601012f6988144d51b9af494">&#9670;&nbsp;</a></span>AZX_BUFFER_ADD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AZX_BUFFER_ADD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">type, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">obj&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="azx__buffer_8h.html#ad190321a9d24ad0157f2e4c19f0b2875">azx_buffer_addObj</a>(obj, sizeof(type))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Adds an object to the buffer. Just pass in the type and the object, and its size will be retrieved and passed to the copy function. </p>

</div>
</div>
<a id="a57cbd24695964549d470cfdc7339ff96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57cbd24695964549d470cfdc7339ff96">&#9670;&nbsp;</a></span>AZX_BUFFER_GET</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AZX_BUFFER_GET</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">type, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">idx&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(const type*)<a class="el" href="azx__buffer_8h.html#aba4fac627137058a3894f9115726ba50">azx_buffer_getObj</a>(idx)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets an object from the buffer. Just pass in the type and index and the object will be retrieved and cast to the right type </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae33ae291e3e2e3766b93ced1573c34b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae33ae291e3e2e3766b93ced1573c34b9">&#9670;&nbsp;</a></span>azx_buffer_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INT32 azx_buffer_add </td>
          <td>(</td>
          <td class="paramtype">const CHAR *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INT32&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores a string in the buffer to be retrieved asynchronously. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>The string to be stored </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>How many bytes of the string to be stored. If the whole string (until the NUL terminator) is to be stored, set this to -1</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An ID that is used to retrieve the string later. If the string cannot be stored, this will be -1.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="azx__buffer_8h.html#ab3c95ccdd99f40c9a80fb184ea4f5a65" title="Reads the string that has been stored.">azx_buffer_get</a> </dd></dl>

</div>
</div>
<a id="ad190321a9d24ad0157f2e4c19f0b2875"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad190321a9d24ad0157f2e4c19f0b2875">&#9670;&nbsp;</a></span>azx_buffer_addObj()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INT32 azx_buffer_addObj </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INT32&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores a data structure in the buffer to be retrieved asynchronously. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">obj</td><td>The data to be copied and stored </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>How many bytes the structure occupies.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An ID that is used to retrieve the data later. If the data cannot be stored, this will be -1.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="azx__buffer_8h.html#aba4fac627137058a3894f9115726ba50" title="Reads some data that has been stored.">azx_buffer_getObj</a> </dd>
<dd>
<a class="el" href="azx__buffer_8h.html#afb5d6450601012f6988144d51b9af494">AZX_BUFFER_ADD</a> </dd></dl>

</div>
</div>
<a id="ab3c95ccdd99f40c9a80fb184ea4f5a65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3c95ccdd99f40c9a80fb184ea4f5a65">&#9670;&nbsp;</a></span>azx_buffer_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const CHAR* azx_buffer_get </td>
          <td>(</td>
          <td class="paramtype">INT32&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the string that has been stored. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>The ID where the data was stored, as returned by <a class="el" href="azx__buffer_8h.html#ae33ae291e3e2e3766b93ced1573c34b9" title="Stores a string in the buffer to be retrieved asynchronously.">azx_buffer_add()</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The NUL-terminated string that was stored. If only the partial string was stored, the library will add the NUL termination. If anything is wrong (like the ID is -1), the string will be empty.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="azx__buffer_8h.html#ae33ae291e3e2e3766b93ced1573c34b9" title="Stores a string in the buffer to be retrieved asynchronously.">azx_buffer_add</a> </dd></dl>

</div>
</div>
<a id="aba4fac627137058a3894f9115726ba50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba4fac627137058a3894f9115726ba50">&#9670;&nbsp;</a></span>azx_buffer_getObj()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const void* azx_buffer_getObj </td>
          <td>(</td>
          <td class="paramtype">INT32&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads some data that has been stored. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>The ID where the data was stored, as returned by <a class="el" href="azx__buffer_8h.html#ad190321a9d24ad0157f2e4c19f0b2875" title="Stores a data structure in the buffer to be retrieved asynchronously.">azx_buffer_addObj()</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The data that was stored. If anything is wrong (like the ID is -1), then NULL will be returned.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="azx__buffer_8h.html#ae33ae291e3e2e3766b93ced1573c34b9" title="Stores a string in the buffer to be retrieved asynchronously.">azx_buffer_add</a> </dd>
<dd>
<a class="el" href="azx__buffer_8h.html#a57cbd24695964549d470cfdc7339ff96">AZX_BUFFER_GET</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_a451d24824756e59bc0ab465137a1721.html">stage</a></li><li class="navelem"><a class="el" href="dir_159a56f2f375d6f48b3d40b3fd23d10a.html">azx</a></li><li class="navelem"><a class="el" href="dir_3e7d3f5cdeaa0d2916b9c57d66c8d865.html">core</a></li><li class="navelem"><a class="el" href="dir_df95525600129d8bfad6c42108ff5419.html">hdr</a></li><li class="navelem"><a class="el" href="azx__buffer_8h.html">azx_buffer.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.16 </li>
    <li class="footer">
      © Telit 2019 All rights reserved.
      <a href="https://telit.com/copyright-policy/">Copyright Policy</a> |
      <a href="https://www.telit.com/editorial-policy-and-process/">Editorial Policy</a> |
      <a href="https://telit.com/eu-privacy-policy/">EU Privacy Policy</a> |
      <a href="https://telit.com/privacy-policy/">Global Privacy Policy</a> |
      <a href="https://www.telit.com/modern-slavery-statement/">Modern Slavery Statement</a> |
      <a href="https://telit.com/terms-of-use/">Terms of Use</a> </li>
  </ul>
</div>
</body>
</html>
